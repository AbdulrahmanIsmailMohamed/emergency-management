<%- include('../partials/header') -%> <%- include('../partials/navbar') -%>
<div class="container">
  <div class="row mt-4">
    <div class="col-md-2 rounded">
      <img
        src="<%=user.avatar%>"
        height="150px"
        width="150px"
        onclick="image(this)"
        style="
          cursor: pointer;
          border: 2px solid #fff;
          box-shadow: 0 0 0 3px #007bff;
          border-radius: 50%;
        "
      />
    </div>
    <div class="col-md-9">
      <h1 class="display-4">Profile</h1>
      <hr />
      <%- include('../partials/flashMessages') %>
      <h3><% if (user) { %> Welcome <%= user.name %>... <% } %></h3>
      <form
        action="/user/upload-avatar/<%=user._id%>"
        method="POST"
        enctype="multipart/form-data"
      >
        <input
          type="file"
          name="avatar"
          id="avatar"
          onchange="readURL(this); toggleUploadButton();"
          style="cursor: pointer"
        />
        <button type="submit" id="uploadButton" class="btn btn-primary my-2">
          Upload
        </button>
      </form>

      <hr />
      <h1 class="display-4" style="display: none" id="preivew">
        Image Preivew
      </h1>
      <img
        src="#"
        alt=""
        id="imagePlaceholder"
        height="300px"
        width="320px"
        style="display: none"
      />
      <img
        src="#"
        alt=""
        id="image"
        height="300px"
        width="320px"
        style="display: none"
      />
    </div>
  </div>
</div>

<script>
  let uploadButton = document.getElementById("uploadButton");
  let preivew = document.getElementById("preivew");
  uploadButton.style.display = "none";
  function toggleUploadButton() {
    var fileInput = document.getElementById("avatar");
    var uploadButton = document.getElementById("uploadButton");
    if (fileInput.files.length > 0) {
      uploadButton.style.display = "block";
      preivew.style.display = "block";
    }
  }
</script>
<%- include('../partials/footer') -%>
